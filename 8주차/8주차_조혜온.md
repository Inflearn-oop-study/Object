# 14. 일관성 있는 협력

휴대폰 과금 시스템을 구현할 때 처음 예제는 일관성이 없어서 이해하기 어렵다

유사한 기능은 유사한 방식으로 구현해야 한다. 협력을 일관성 있게 만들어야 한다.

## 설계에 일관성 부여하기

- 변하는 개념을 변하지 않는 개념으로부터 분리하라
- 변하는 개념을 캡슐화 하라
  - 추상화를 찾아 추상화에 의존하도록 만드는 것

---

- 조건에 따라 분기되는 어떤 로직들이 있다면 이 로직들이 바로 개별적인 변경이라고 볼 수 있다.
- 클래스를 분리하면 유사한 행동을 하는 클래스들을 역할이라는 추상화로 묶을 수 있고 이는 설계를 일관성있게 유지시킬 수 있다.

### 캡슐화 다시 살펴보기

- 캡슐화는 데이터 은닉 이상이다.
- 캡슐화는 변하는 어떤 것이든 감추는 것이다.

**캡슐화 종류**

- 데이터 캡슐화
- 메서드 캡슐화
- 객체 캡슐화
- 서브타입 캡슐화

**서브타입 캡슐화와 객체 캡슐화를 적용하는 방법**

- 변하는 부분을 분리해서 타입 계층을 만든다
- 변하지 않는 부분의 일부로 타입 계층을 합성한다.

변하는 것과 변하지 않는것을 분리하고 변하는 것을 캡슐화한 코드는 오로지 변하지 않는 것과 추상화에 대한 의존성만으로도 전체적인 협력을 구현할 수 있다.

유사한 기능에 대해 유사한 협력 패턴을 적용하는 것은 객체지향 시스템에서 **개념적 무결성**을 유지할 수 있는 가장 효과적인 방법이다.

# 15. 디자인 패턴과 프레임워크

소프트웨어 설계에서 반복적으로 발생하는 문제에 대해 반복적으로 적용할 수 있는 해결 방법을 **디자인 패턴**이라고 부른다.

**디자인 패턴 정의**

- 패턴은 추상적인 원칙과 실제 코드 작성 사이의 간극을 메워주며 실질적인 코드 작성을 돕는다.

**저저가 동의하는 마틴 파울러의 디자인 패턴 정의**

- 패턴은 한 컨텍스트에서 유용한 동시에 다른 컨텍스트에서도 유용한 ‘아이디어’다.

### 캡슐화와 디자인 패턴

대부분의 디자인 패턴의 목적은 특정한 변경을 캡슐화 함으로써 유연하고 일관성 있는 협력을 설계할 수 있는 경험을 공유하는 것이다.

- 패턴을 맹목적으로 사용하면 안된다.
- 어떤 컨텍스트에서 어떤 패턴을 적용해야 하는지 다양한 실무경험을 통해 감각을 익히자

## 프레임워크와 코드 재사용

- 프레임워크란 ‘추상 클래스나 인터페이스를 정의하고 인스턴스 사이의 상호작용을 통해 시스템 전체 혹은 일부를 구현해 놓은 재사용 가능한 설계’, 또는 ‘애플리케이션 개발자가 현재의 요구사항에 맞게 커스터마이징할 수 있는 애플리케이션의 골격’을 의미한다.
- 협력을 제어하는 것은 프레임워크다. 즉 제어가 역전된 것

## 느낀점

디자인 패턴책을 보기 전에 먼저 봐서 다행이라고 느꼈다. 지금 까지 배운 객체지향 설계 덕분에 앞으로 설계할때 더 객체지향으로 설계할 수 있을 것 같다.
협력,역할, 책임이 중요하다는 것을 많이 느꼈다.객체지향에 대해 아무것도 몰랐단 것을 깨달았다. 특히 상속에서 서브크래싱과 서브타이핑 내용이 인상깊었다.
다음프로젝트에서는 이런 점을 염두에 두고 설계를 해보고 싶다.
많은 도움이 된 책이였다.
